openapi: 3.1.0
info:
  title: Bamboo Images API
  version: 1.0.0
servers:
  - url: https://bamboo-images.onrender.com
paths:
  /images:
    get:
      operationId: listImages
      summary: List and search available bamboo images
      parameters:
        - in: query
          name: tags
          schema: { type: string }
          description: Comma-separated folder names (e.g. "hypar,petung")
        - in: query
          name: q
          schema: { type: string }
          description: Keyword search in file name or tags
        - in: query
          name: limit
          schema:
            type: integer
            default: 6
            minimum: 1
            maximum: 24
          description: Maximum number of results to return
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  count: { type: integer }
                  items:
                    type: array
                    items:
                      type: object
                      required: [id, url, title]
                      properties:
                        id: { type: string }
                        title: { type: string }
                        url: { type: string, format: uri }
                        tags:
                          type: array
                          items: { type: string }

  /generate:
    post:
      operationId: generateImage
      summary: Generate a new image (optional if you use DALLÂ·E directly)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [prompt]
              properties:
                prompt: { type: string }
                size:
                  type: string
                  enum: ["1024x1024", "1024x1536", "1536x1024", "auto"]
                  default: "1024x1024"
      responses:
        '200':
          description: Image generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  b64: { type: string, description: Base64-encoded PNG data }
                  size: { type: string }
